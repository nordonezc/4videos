<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline'"
    />
    <title>Hello World!</title>
  </head>
  <body>
    <h1>Hello World!</h1>
    We are using Node.js <span id="node-version"></span>, Chromium
    <span id="chrome-version"></span>, and Electron
    <span id="electron-version"></span>.

    <form action="">
      <div>
        <label for="">Select a video</label>
        <input type="file" accept="" />
        <button type="submit">Send</button>
      </div>
    </form>

    <h3>Duration:</h3>
    <h2 id="result"></h2>
  </body>

  <script>
    const electron = require("electron");
    const { ipcRenderer } = electron;

    document.querySelector("form").addEventListener("submit", (event) => {
      event.preventDefault();
      const files = document.querySelector("input").files;
      console.log(files);
      const { path } = files[0];
      ipcRenderer.send("video:submit", path);
    });
    ipcRenderer.on("video:metadata", (event, metadata) => {
      document.querySelector("#result").innerHTML = `Duration is ${metadata}`;
    });
  </script>
</html>
